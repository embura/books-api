// Generated by CoffeeScript 1.11.1
(function() {
  var _, cloneWithNonEnumerableProperties, isConstructor, plainObjectContainingConstructors, wrapThoseConstructors, wrapWithConstructor;

  _ = require('../util/lodash-wrap');

  isConstructor = require('./is-constructor');

  cloneWithNonEnumerableProperties = require('../util/clone-with-non-enumerable-properties');

  wrapWithConstructor = require('./wrap-with-constructor');

  module.exports = function(fakeThing, realThing) {
    if (isConstructor(realThing)) {
      return wrapWithConstructor(fakeThing);
    } else if (plainObjectContainingConstructors(realThing)) {
      return wrapThoseConstructors(fakeThing, realThing);
    } else {
      return fakeThing;
    }
  };

  plainObjectContainingConstructors = function(realThing) {
    return _.isPlainObject(realThing) && _.some(realThing, isConstructor);
  };

  wrapThoseConstructors = function(fakeThing, realThing) {
    fakeThing = cloneWithNonEnumerableProperties(fakeThing);
    _.each(fakeThing, function(v, k) {
      if (isConstructor(realThing[k])) {
        return fakeThing[k] = wrapWithConstructor(v);
      }
    });
    return fakeThing;
  };

}).call(this);
